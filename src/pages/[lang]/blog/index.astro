---
import FormattedDate from '../../../components/FormattedDate.astro';
import { getCollection } from 'astro:content';
import Base from '../../../layouts/Base.astro';

const { lang } = Astro.params;

const posts = (await getCollection('blog'))
	.filter((post) => post.slug.startsWith(`${lang}`))
	.sort((a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf());
---

<Base>
	<main>
		<section>
			<ul>
				{
					posts.map((post) => (
						<li>
							<a href={`/${lang}/blog/${post.slug.split('/')[1]}`}>
								<img
									width={720}
									height={360}
									src={post.data.heroImage}
									alt=''
								/>
								<h4 class='title'>{post.data.title}</h4>
								<p class='date'>
									<FormattedDate date={post.data.pubDate} />
								</p>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</Base>
